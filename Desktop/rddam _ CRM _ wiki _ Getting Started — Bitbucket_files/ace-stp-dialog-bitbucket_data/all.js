!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.AP=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";AP.define("cookie",["_dollar","_rpc"],function(a,b){var c;return b.extend(function(a){return c={save:function(b,c,d){a.saveCookie(b,c,d)},read:function(b,c){a.readCookie(b,c)},erase:function(b){a.eraseCookie(b)}},{stubs:["saveCookie","readCookie","eraseCookie"]}}),c})},{}],2:[function(a,b,c){"use strict";AP.define("history",["_dollar","_rpc","_ui-params"],function(a,b,c){var d=[],e=c.fromWindowName(null,"historyState");return b.extend(function(b){var c={getState:function(){return e},go:function(a){b.historyGo(a)},back:function(){return this.go(-1)},forward:function(){return this.go(1)},pushState:function(a){e=a,b.historyPushState(a)},replaceState:function(a){e=a,b.historyReplaceState(a)},popState:function(a){d.push(a)}};return{apis:c,internals:{historyMessage:function(b){e=b.newURL;for(var c in d)try{d[c](b)}catch(f){a.log("History popstate callback exception: "+f.message)}}},stubs:["historyPushState","historyGo","historyReplaceState"]}})})},{}],3:[function(b,c,d){(function(e){"use strict";!function(b){if("object"==typeof d&&"undefined"!=typeof c)c.exports=b();else if("function"==typeof a&&a.amd)a([],b);else{var f;f="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:this,f.AP=b()}}(function(){var a;return function c(a,d,e){function f(h,i){if(!d[h]){if(!a[h]){var j="function"==typeof b&&b;if(!i&&j)return j(h,!0);if(g)return g(h,!0);var k=new Error("Cannot find module '"+h+"'");throw k.code="MODULE_NOT_FOUND",k}var l=d[h]={exports:{}};a[h][0].call(l.exports,function(b){var c=a[h][1][b];return f(c?c:b)},l,l.exports,c,a,d,e)}return d[h].exports}for(var g="function"==typeof b&&b,h=0;h<e.length;h++)f(e[h]);return f}({1:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./amd"),f=d(e),g=a("./util"),h=(d(g),a("./dollar")),i=d(h),j=a("../common/events"),k=(d(j),a("../common/base64")),l=(d(k),a("../common/uri")),m=(d(l),a("../common/ui-params")),n=(d(m),a("../common/jwt")),o=(d(n),a("../common/xdm-rpc")),p=(d(o),a("./rpc")),q=d(p),r=a("./events"),s=(d(r),a("./env")),t=d(s),u=a("./dialog"),v=d(u),w=a("./inline-dialog"),x=(d(w),a("./messages")),y=(d(x),window.AP={});i["default"].extend(y,t["default"],f["default"],{rpc:{extend:q["default"].extend,init:q["default"].init},Meta:{get:t["default"].meta},Dialog:v["default"]}),window.AP=y,c["default"]=y,b.exports=c["default"]},{"../common/base64":4,"../common/events":6,"../common/jwt":7,"../common/ui-params":8,"../common/uri":9,"../common/xdm-rpc":10,"./amd":12,"./dialog":13,"./dollar":14,"./env":15,"./events":16,"./inline-dialog":17,"./messages":18,"./rpc":20,"./util":21}],2:[function(a,b,c){!function(){function a(a){this.message=a}var b="undefined"!=typeof c?c:this,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.prototype=new Error,a.prototype.name="InvalidCharacterError",b.btoa||(b.btoa=function(b){for(var c,e,f=String(b),g=0,h=d,i="";f.charAt(0|g)||(h="=",g%1);i+=h.charAt(63&c>>8-g%1*8)){if(e=f.charCodeAt(g+=.75),e>255)throw new a("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");c=c<<8|e}return i}),b.atob||(b.atob=function(b){var c=String(b).replace(/=+$/,"");if(c.length%4==1)throw new a("'atob' failed: The string to be decoded is not correctly encoded.");for(var e,f,g=0,h=0,i="";f=c.charAt(h++);~f&&(e=g%4?64*e+f:f,g++%4)?i+=String.fromCharCode(255&e>>(-2*g&6)):0)f=d.indexOf(f);return i})}()},{}],3:[function(b,c,d){!function(b){function d(a){return a&&(a=a.toString().replace(h.pluses,"%20"),a=decodeURIComponent(a)),a}function e(a){var b=h.uri_parser,c=["source","protocol","authority","userInfo","user","password","host","port","isColonUri","relative","path","directory","file","query","anchor"],d=b.exec(a||""),e={};return c.forEach(function(a,b){e[a]=d[b]||""}),e}function f(a){var b,c,e,f,g,i,j,k=[];if("undefined"==typeof a||null===a||""===a)return k;for(0===a.indexOf("?")&&(a=a.substring(1)),c=a.toString().split(h.query_separator),b=0,j=c.length;j>b;b++)e=c[b],f=e.indexOf("="),0!==f&&(g=d(e.substring(0,f)),i=d(e.substring(f+1)),k.push(-1===f?[e,null]:[g,i]));return k}function g(a){this.uriParts=e(a),this.queryPairs=f(this.uriParts.query),this.hasAuthorityPrefixUserPref=null}var h={starts_with_slashes:/^\/+/,ends_with_slashes:/\/+$/,pluses:/\+/g,query_separator:/[&;]/,uri_parser:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*)(?::([^:@]*))?)?@)?(\[[0-9a-fA-F:.]+\]|[^:\/?#]*)(?::(\d+|(?=:)))?(:)?)((((?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/};Array.prototype.forEach||(Array.prototype.forEach=function(a,b){var c,d;if(null==this)throw new TypeError(" this is null or not defined");var e=Object(this),f=e.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(arguments.length>1&&(c=b),d=0;f>d;){var g;d in e&&(g=e[d],a.call(c,g,d,e)),d++}}),["protocol","userInfo","host","port","path","anchor"].forEach(function(a){g.prototype[a]=function(b){return"undefined"!=typeof b&&(this.uriParts[a]=b),this.uriParts[a]}}),g.prototype.hasAuthorityPrefix=function(a){return"undefined"!=typeof a&&(this.hasAuthorityPrefixUserPref=a),null===this.hasAuthorityPrefixUserPref?-1!==this.uriParts.source.indexOf("//"):this.hasAuthorityPrefixUserPref},g.prototype.isColonUri=function(a){return"undefined"==typeof a?!!this.uriParts.isColonUri:void(this.uriParts.isColonUri=!!a)},g.prototype.query=function(a){var b,c,d,e="";for("undefined"!=typeof a&&(this.queryPairs=f(a)),b=0,d=this.queryPairs.length;d>b;b++)c=this.queryPairs[b],e.length>0&&(e+="&"),null===c[1]?e+=c[0]:(e+=c[0],e+="=","undefined"!=typeof c[1]&&(e+=encodeURIComponent(c[1])));return e.length>0?"?"+e:e},g.prototype.getQueryParamValue=function(a){var b,c,d;for(c=0,d=this.queryPairs.length;d>c;c++)if(b=this.queryPairs[c],a===b[0])return b[1]},g.prototype.getQueryParamValues=function(a){var b,c,d,e=[];for(b=0,d=this.queryPairs.length;d>b;b++)c=this.queryPairs[b],a===c[0]&&e.push(c[1]);return e},g.prototype.deleteQueryParam=function(a,b){var c,e,f,g,h,i=[];for(c=0,h=this.queryPairs.length;h>c;c++)e=this.queryPairs[c],f=d(e[0])===d(a),g=e[1]===b,(1!==arguments.length||f)&&(2!==arguments.length||f&&g)||i.push(e);return this.queryPairs=i,this},g.prototype.addQueryParam=function(a,b,c){return 3===arguments.length&&-1!==c?(c=Math.min(c,this.queryPairs.length),this.queryPairs.splice(c,0,[a,b])):arguments.length>0&&this.queryPairs.push([a,b]),this},g.prototype.hasQueryParam=function(a){var b,c=this.queryPairs.length;for(b=0;c>b;b++)if(this.queryPairs[b][0]==a)return!0;return!1},g.prototype.replaceQueryParam=function(a,b,c){var e,f,g=-1,h=this.queryPairs.length;if(3===arguments.length){for(e=0;h>e;e++)if(f=this.queryPairs[e],d(f[0])===d(a)&&decodeURIComponent(f[1])===d(c)){g=e;break}g>=0&&this.deleteQueryParam(a,d(c)).addQueryParam(a,b,g)}else{for(e=0;h>e;e++)if(f=this.queryPairs[e],d(f[0])===d(a)){g=e;break}this.deleteQueryParam(a),this.addQueryParam(a,b,g)}return this},["protocol","hasAuthorityPrefix","isColonUri","userInfo","host","port","path","query","anchor"].forEach(function(a){var b="set"+a.charAt(0).toUpperCase()+a.slice(1);g.prototype[b]=function(b){return this[a](b),this}}),g.prototype.scheme=function(){var a="";return this.protocol()?(a+=this.protocol(),this.protocol().indexOf(":")!==this.protocol().length-1&&(a+=":"),a+="//"):this.hasAuthorityPrefix()&&this.host()&&(a+="//"),a},g.prototype.origin=function(){var a=this.scheme();return this.userInfo()&&this.host()&&(a+=this.userInfo(),this.userInfo().indexOf("@")!==this.userInfo().length-1&&(a+="@")),this.host()&&(a+=this.host(),(this.port()||this.path()&&this.path().substr(0,1).match(/[0-9]/))&&(a+=":"+this.port())),a},g.prototype.addTrailingSlash=function(){var a=this.path()||"";return"/"!==a.substr(-1)&&this.path(a+"/"),this},g.prototype.toString=function(){var a,b=this.origin();return this.isColonUri()?this.path()&&(b+=":"+this.path()):this.path()?(a=this.path(),h.ends_with_slashes.test(b)||h.starts_with_slashes.test(a)?(b&&b.replace(h.ends_with_slashes,"/"),a=a.replace(h.starts_with_slashes,"/")):b+="/",b+=a):this.host()&&(this.query().toString()||this.anchor())&&(b+="/"),this.query().toString()&&(b+=this.query().toString()),this.anchor()&&(0!==this.anchor().indexOf("#")&&(b+="#"),b+=this.anchor()),b},g.prototype.clone=function(){return new g(this.toString())},"function"==typeof a&&a.amd?a(function(){return g}):"undefined"!=typeof c&&"undefined"!=typeof c.exports?c.exports=g:b.Uri=g}(this)},{}],4:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("Base64"),f=d(e);c["default"]={encode:f["default"].btoa,decode:f["default"].atob},b.exports=c["default"]},{Base64:2}],5:[function(a,b,c){Object.defineProperty(c,"__esModule",{value:!0});var d;d=a("../plugin/dollar"),c["default"]=d,b.exports=c["default"]},{"../plugin/dollar":14}],6:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){this._key=a,this._origin=b,this._events={},this._any=[]}function f(a,b){for(var c=0;c<a.length;++c)try{a[c].apply(null,b)}catch(d){j(d.stack||d.message||d)}}Object.defineProperty(c,"__esModule",{value:!0});var g=a("./dollar"),h=d(g),i=window,j=i.AJS&&i.AJS.log||i.console&&i.console.log||function(){},k=e.prototype;k.on=function(a,b){return a&&b&&this._listeners(a).push(b),this},k.once=function(a,b){var c=this,d=function e(){c.off(a,e),b.apply(null,arguments)};return this.on(a,d),this},k.onAny=function(a){return this._any.push(a),this},k.off=function(a,b){var c=this._events[a];if(c){var d=h["default"].inArray(b,c);d>=0&&c.splice(d,1),0===c.length&&delete this._events[a]}return this},k.offAll=function(a){return a?delete this._events[a]:this._events={},this},k.offAny=function(a){var b=this._any,c=h["default"].inArray(a,b);return c>=0&&b.splice(c,1),this},k.emit=function(a){return this._emitEvent(this._event.apply(this,arguments))},k._event=function(a){return{name:a,args:[].slice.call(arguments,1),attrs:{},source:{key:this._key,origin:this._origin}}},k._emitEvent=function(a){var b=a.args.concat(a);return f(this._listeners(a.name),b),f(this._any,[a.name].concat(b)),this},k._listeners=function(a){return this._events[a]=this._events[a]||[]},c["default"]={Events:e},b.exports=c["default"]},{"./dollar":5}],7:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){return f(a).iss}function f(a){if(null===a||""===a)throw"Invalid JWT: must be neither null nor empty-string.";var b=a.indexOf("."),c=a.indexOf(".",b+1);if(0>b||b>=c)throw'Invalid JWT: must contain 2 period (".") characters.';var d=a.substring(b+1,c);if(null===d||""===d)throw"Invalid JWT: encoded claims must be neither null nor empty-string.";var e=i["default"].decode.call(window,d);return JSON.parse(e)}function g(a,b){void 0===b&&(b=60);var c=f(a),d=0,e=Math.floor(Date.now()/1e3);return c&&c.exp&&(d=c.exp),b>d-e?!0:!1}Object.defineProperty(c,"__esModule",{value:!0});var h=a("./base64"),i=d(h);c["default"]={parseJwtIssuer:e,parseJwtClaims:f,isJwtExpired:g},b.exports=c["default"]},{"./base64":4}],8:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./base64"),f=d(e),g=a("./uri"),h=d(g);c["default"]={encode:function(a){if(a){var b=JSON.stringify(a);return f["default"].encode.call(window,b)}},fromUrl:function(a){var b=new h["default"].init(a).getQueryParamValue("ui-params");return this.decode(b)},fromWindowName:function(a,b){a=a||window;var c=this.decode(a.name);return b?c?c[b]:void 0:c},decode:function(a){var b={};if(a&&a.length>0)try{b=JSON.parse(f["default"].decode.call(window,a))}catch(c){console&&console.log&&console.log("Cannot decode passed ui params",a)}return b}},b.exports=c["default"]},{"./base64":4,"./uri":9}],9:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("jsuri"),f=d(e);c["default"]={init:f["default"]},b.exports=c["default"]},{jsuri:3}],10:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c){function d(a,b,c){try{B.postMessage(JSON.stringify({c:D,i:a,t:b,m:c}),C)}catch(d){x(v(d))}}function f(a,b,c,e){var f=Math.floor(1e9*Math.random()).toString(16);N.add(f,c,e),d(f,"request",{n:a,a:b})}function h(a,b){d(a,"done",b)}function j(a,b){d(a,"fail",b)}function l(a){try{var b=JSON.parse(a.data),c=b.i,d=b.c,e=b.t,f=b.m;if(a.source!==B&&a.origin.toLowerCase()===C&&d===D&&(B=a.source),a.source!==B||a.origin.toLowerCase()!==C||d!==D)return;if("request"===e){var g,i,k,l=f.n,m=f.a,n=K[l];if(n){g=function(a){h(c,a)},i=function(a){j(c,a)},k=(m?m.length:0)<n.length;var o=K;z.isHost===!0?(o=z,o.analytics&&o.analytics.trackBridgeMethod(l)):o.isHost=!1;try{k?n.apply(o,m.concat([g,i])):g(n.apply(o,m))}catch(p){i(v(p)),y(p)}}else w("Unhandled request:",b)}else("done"===e||"fail"===e)&&(N.invoke(e,c,f)||w("Unhandled response:",e,c,f))}catch(p){x(v(p))}}function n(b){return function(){function c(){return a.isFunction(g[g.length-1])?g.pop():void 0}var d,e,g=[].slice.call(arguments);e=c(),d=c(),d||(d=e,e=void 0),f(b,g,d,e)}}function p(a){z.isActive()?l(a.originalEvent?a.originalEvent:a):r()}function q(){a(window).bind("message",p)}function r(){a(window).unbind("message",p)}function s(a,b){return new k["default"].init(a).getQueryParamValue(b)}function t(a){return new k["default"].init(a).origin()}function u(b){if(!b.container)throw new Error("config.container must be defined");var c=document.createElement("iframe"),d="easyXDM_"+b.container+"_provider",e="";return b.uiParams&&(e=m["default"].encode(b.uiParams)),a.extend(c,{id:d,name:e,frameBorder:"0"},b.props),c.setAttribute("rel","nofollow"),a(document.getElementById(b.container)).append(c),c.src=b.remote,c}function v(a){return a.message||a.toString()}function w(){e.debug&&x.apply(I,["DEBUG:"].concat([].slice.call(arguments)))}function x(){var b=a.log||I.AJS&&I.AJS.log;b&&b.apply(I,arguments)}function y(){var a=I.AJS&&I.AJS.error;a&&a.apply(I,arguments)}var z,A,B,C,D,E,F,G,H,I=window,J=I.location.toString(),K=c.local||{},L=c.remote||[],M=t(J),N=function(){var a={};return{add:function(b,c,d){a[b]={done:c||null,fail:d||null,async:!!c}},invoke:function(b,c,d){var e;return a[c]&&(a[c][b]?(a[c][b](d),e=!0):e=!a[c].async&&"fail"!==b,delete a[c]),e}}}();if(/xdm_e/.test(J)){B=I.parent,F="local";var O=s(J,"jwt");G=O?i["default"].parseJwtIssuer(O):s(J,"oauth_consumer_key"),null===G&&(G=Math.random()),H=F,C=s(J,"xdm_e").toLowerCase(),D=s(J,"xdm_c"),E={isHost:!1,isActive:function(){return!0}}}else{a(document.getElementById(b.container)).find("iframe").trigger("ra.iframe.destroy");var P=u(b);B=P.contentWindow,F=s(b.remote,"oauth_consumer_key")||s(b.remote,"jwt"),G=b.remoteKey,H=G,C=t(b.remote).toLowerCase(),D=b.channel,E={isHost:!0,iframe:P,uiParams:b.uiParams,destroy:function(){window.clearTimeout(z.timeout),r(),z.iframe&&(a(z.iframe).remove(),delete z.iframe)},isActive:function(){return a.contains(document.documentElement,z.iframe)}},a(P).on("ra.iframe.destroy",E.destroy)}A=H+"|"+(o+=1),z=a.extend({id:A,remoteOrigin:C,channel:D,addonKey:H},E),a.each(L,function(a,b){"number"==typeof a&&(a=b),z[a]=n(a)});var Q=z.events=new g["default"].Events(F,M);return Q.onAny(function(){var b=arguments[arguments.length-1],c=b.trace=b.trace||{},d=z.id+"|xdm";(z.isHost&&!c[d]&&b.source.channel!==z.id||!z.isHost&&b.source.key===F)&&(c[d]=!0,b=a.extend({},b),delete b.trace,w("Forwarding "+(z.isHost?"host":"addon")+" event:",b),f("_event",[b]))}),K._event=function(a){delete a.trace,this.isHost&&(a.source={channel:this.id||A,key:this.addonKey,origin:this.remoteOrigin||C}),w("Receiving as "+(this.isHost?"host":"addon")+" event:",a),Q._emitEvent(a)},q(),z}Object.defineProperty(c,"__esModule",{value:!0});var f=a("./events"),g=d(f),h=a("./jwt"),i=d(h),j=a("./uri"),k=d(j),l=a("./ui-params"),m=d(l),n=a("../host/util"),o=(d(n),0);c["default"]=e,b.exports=c["default"]},{"../host/util":11,"./events":6,"./jwt":7,"./ui-params":8,"./uri":9}],11:[function(a,b,c){function d(a){if(!a)throw new Error("No selector to escape");return a.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$&")}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]={escapeSelector:d},b.exports=c["default"]},{}],12:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){function c(a){if(d.push(a),d.length===g){for(var c=[],e=0;g>e;e+=1)c[e]=d[e].exports;b&&b.apply(window,c)}}var d=[],e=0,g=a.length;if(a&&a.length>0)for(;g>e;e+=1)f(a[e],c);else b&&b()}function f(a,b){b(g(a))}function g(a){return J[a]=J[a]||{name:a,exports:function(){function a(){var b=a.__target__;return b?b.apply(window,arguments):void 0}return a}()}}Object.defineProperty(c,"__esModule",{value:!0});var h=a("./util"),i=d(h),j=a("./dollar"),k=d(j),l=a("../common/events"),m=d(l),n=a("../common/base64"),o=d(n),p=a("../common/uri"),q=d(p),r=a("../common/ui-params"),s=d(r),t=a("../common/xdm-rpc"),u=d(t),v=a("./rpc"),w=d(v),x=a("./events"),y=d(x),z=a("./env"),A=d(z),B=a("./messages"),C=d(B),D=a("./dialog"),E=d(D),F=a("./inline-dialog"),G=d(F),H=a("./resize_listener"),I=d(H),J={_util:{exports:i["default"]},_dollar:{exports:k["default"]},_events:{exports:m["default"]},_base64:{exports:o["default"]},_uri:{exports:q["default"]},"_ui-params":{exports:s["default"]},_xdm:{exports:u["default"]},_rpc:{exports:w["default"]},events:{exports:y["default"]},env:{exports:A["default"]},messages:{exports:C["default"]},dialog:{exports:E["default"]},"inline-dialog":{exports:G["default"]},_resize_listener:{exports:I["default"]}};c["default"]={define:function(a,b,c){var d,f=g(a);c||(c=b,b=[]),c&&(d="function"!=typeof c?function(){return c}:c,e(b,function(){var a=d.apply(window,arguments);if(a){"function"==typeof a&&(f.exports.__target__=a);for(var b in a)a.hasOwnProperty(b)&&(f.exports[b]=a[b])}}))},require:function(a,b){e("string"==typeof a?[a]:a,b)}},b.exports=c["default"]},{"../common/base64":4,"../common/events":6,"../common/ui-params":8,"../common/uri":9,"../common/xdm-rpc":10,"./dialog":13,"./dollar":14,"./env":15,"./events":16,"./inline-dialog":17,"./messages":18,"./resize_listener":19,"./rpc":20,"./util":21}],13:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e,f=a("./dollar"),g=d(f),h=a("./rpc"),i=d(h),j=a("../common/ui-params"),k=d(j),l=a("../common/uri"),m=d(l),n=k["default"].fromUrl(window.location.toString()),o=Boolean(n.dlg)||Boolean(n.isDialog),p=new m["default"].init(window.location.toString());"1"===p.getQueryParamValue("dialog")&&(o=!0),i["default"].extend(function(a){var b={};return e={create:function(b){return a.createDialog(b),{on:function(b,c){a.events.once("dialog."+b,c)}}},close:function(b){a.events.emit("dialog.close",b),a.closeDialog()},isDialog:o,onDialogMessage:function(a,b){this.getButton(a).bind(b)},getButton:function(c){return{name:c,enable:function(){a.setDialogButtonEnabled(c,!0)},disable:function(){a.setDialogButtonEnabled(c,!1)},toggle:function(){var a=this;a.isEnabled(function(b){a[b?"disable":"enable"](c)})},isEnabled:function(b){a.isDialogButtonEnabled(c,b)},bind:function(d){a.dialogListenerBound();var e=b[c];e||(e=b[c]=[]),e.push(d)},trigger:function(){var a=this,d=!0,e=!0,f=b[c];return g["default"].each(f,function(b,c){return e=c.call(a,{button:a,stopPropagation:function(){d=!1}}),d}),!!e}}}},{internals:{dialogMessage:function(a){var b=!0;try{o?b=e.getButton(a).trigger():g["default"].handleError("Received unexpected dialog button event from host:",a)}catch(c){g["default"].handleError(c)}return b}},stubs:["dialogListenerBound","setDialogButtonEnabled","isDialogButtonEnabled","createDialog","closeDialog"]}}),c["default"]=e,b.exports=c["default"]},{"../common/ui-params":8,"../common/uri":9,"./dollar":14,"./rpc":20}],14:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){b=b||j;var c=[];if(a)if("string"==typeof a){var d=b.querySelectorAll(a);h(d,function(a,b){c.push(b)})}else 1===a.nodeType?c.push(a):a===window&&c.push(a);return i(c,{each:function(a){return h(this,a),this},bind:function(a,b){this.each(function(c,d){g["default"].bind(d,a,b)})},attr:function(a){var b;return this.each(function(c,d){return b=d[a]||d.getAttribute&&d.getAttribute(a),!b}),b},removeClass:function(a){return this.each(function(b,c){c.className&&(c.className=c.className.replace(new RegExp("(^|\\s)"+a+"(\\s|$)")," "))})},html:function(a){return this.each(function(b,c){c.innerHTML=a})},append:function(a){return this.each(function(c,d){var e=b.createElement(a.tag);h(a,function(a,c){"$text"===a?e.styleSheet?e.styleSheet.cssText=c:e.appendChild(b.createTextNode(c)):"tag"!==a&&(e[a]=c)}),d.appendChild(e)})}}),c}Object.defineProperty(c,"__esModule",{value:!0});var f=a("./util"),g=d(f),h=g["default"].each,i=g["default"].extend,j=window.document;c["default"]=i(e,g["default"]),b.exports=c["default"]},{"./util":21}],15:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./dollar"),f=d(e),g=a("./rpc"),h=d(g),i=a("../common/ui-params"),j=d(i),k=j["default"].fromWindowName(),l=Boolean(k.isInlineDialog),m=h["default"].extend(function(a){return{apis:{getLocation:function(b){a.getLocation(b)},getUser:function(a){AP.require(["user"],function(b){return b&&b.getUser?b.getUser(a):void 0})},resize:f["default"].debounce(function(b,c){var d=m.size(b,c,m.container());a.resize(d.w,d.h)},50),sizeToParent:f["default"].debounce(function(){a.sizeToParent()},50)}}});c["default"]=f["default"].extend(m,{meta:function(a){if(!(navigator.userAgent.indexOf("MSIE 8")>=0))return f["default"]("meta[name='ap-"+a+"']").attr("content");var b,c=document.getElementsByTagName("meta");for(b=0;b<c.length;b++)if(c[b].getAttribute("name")==="ap-"+a)return c[b].getAttribute("content")},container:function n(){var n=f["default"](".ac-content, #content");return n.length>0?n[0]:document.body},localUrl:function(a){return this.meta("local-base-url")+(null==a?"":a)},size:function(a,b,c){var d,e,f=null==a?"100%":a;return c||(c=this.container()),l&&"100%"===a&&(f=Math.max(c.scrollWidth,c.offsetWidth,c.clientWidth)),b?d=b:(e=Math.max(c.scrollHeight,document.documentElement.scrollHeight,c.offsetHeight,document.documentElement.offsetHeight,c.clientHeight,document.documentElement.clientHeight),c===document.body?d=e:(d=Math.max(c.offsetHeight,c.clientHeight),0===d&&(d=e))),{w:f,h:d}}}),b.exports=c["default"]},{"../common/ui-params":8,"./dollar":14,"./rpc":20}],16:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./dollar"),f=d(e),g=a("./rpc"),h=d(g);c["default"]=h["default"].extend(function(a){var b={};return f["default"].each(["on","once","onAny","off","offAll","offAny","emit"],function(c,d){b[d]=function(){var c=a.events;return c[d].apply(c,arguments),b}}),{apis:b}}),b.exports=c["default"]},{"./dollar":14,"./rpc":20}],17:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e,f=a("./dollar"),g=(d(f),a("./rpc")),h=d(g);h["default"].extend(function(a){return e={hide:function(){a.hideInlineDialog()}},{stubs:["hideInlineDialog"]}}),c["default"]=e,b.exports=c["default"]},{"./dollar":14,"./rpc":20}],18:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(){return j++,"ap-message-"+j}Object.defineProperty(c,"__esModule",{value:!0});var f=a("./dollar"),g=d(f),h=a("./rpc"),i=d(h),j=0;c["default"]=i["default"].extend(function(a){var b={};return g["default"].each(["generic","error","warning","success","info","hint"],function(c,d){b[d]=function(b,c,f){return f=f||{},f.id=e(),a.showMessage(d,b,c,f),f.id}}),b.clear=function(b){a.clearMessage(b)},{apis:b,stubs:["showMessage","clearMessage"]}}),b.exports=c["default"]},{"./dollar":14,"./rpc":20}],19:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c){var d="over"==b;a.addEventListener("OverflowEvent"in window?"overflowchanged":b+"flow",function(a){return a.type==b+"flow"||0==a.orient&&a.horizontalOverflow==d||1==a.orient&&a.verticalOverflow==d||2==a.orient&&a.horizontalOverflow==d&&a.verticalOverflow==d?(a.flow=b,c.call(this,a)):void 0},!1)}function f(a,b){var c="onresize"in a;if(!c&&!a._resizeSensor){h["default"]("head").append({tag:"style",type:"text/css",$text:".ac-resize-sensor,.ac-resize-sensor>div {position: absolute;top: 0;left: 0;width: 100%;height: 100%;overflow: hidden;z-index: -1;}"});var d=a._resizeSensor=document.createElement("div");d.className="ac-resize-sensor",d.innerHTML='<div class="ac-resize-overflow"><div></div></div><div class="ac-resize-underflow"><div></div></div>';var f=0,g=0,i=d.firstElementChild.firstChild,j=d.lastElementChild.firstChild,k=function(b){var c=!1,d=a.offsetWidth;f!=d&&(i.style.width=d-1+"px",j.style.width=d+1+"px",c=!0,f=d);var e=a.offsetHeight;if(g!=e&&(i.style.height=e-1+"px",j.style.height=e+1+"px",c=!0,g=e),c&&b.currentTarget!=a){var b=document.createEvent("Event");b.initEvent("resize",!0,!0),a.dispatchEvent(b)}};"static"===getComputedStyle(a).position&&(a.style.position="relative",a._resizeSensor._resetPosition=!0),e(d,"over",k),e(d,"under",k),e(d.firstElementChild,"over",k),e(d.lastElementChild,"under",k),a.appendChild(d),k({})}var l=a._flowEvents||(a._flowEvents=[]);-1==h["default"].inArray(b,l)&&l.push(b),c||a.addEventListener("resize",b,!1),a.onresize=function(b){h["default"].each(l,function(c,d){d.call(a,b)})}}Object.defineProperty(c,"__esModule",{value:!0});var g=a("./dollar"),h=d(g);c["default"]={addListener:f},b.exports=c["default"]},{"./dollar":14}],20:[function(a,b,c){function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e,f,g=a("./dollar"),h=d(g),i=a("../common/xdm-rpc"),j=d(i),k=h["default"].each,l=h["default"].extend,m=h["default"].isFunction,n={},o={},p=["init"],q={},r=[];c["default"]={extend:function(a){m(a)&&(a=a(n)),l(o,a.apis),l(q,a.internals),p=p.concat(a.stubs||[]);var b=a.init;return m(b)&&r.push(b),a.apis},init:function(a){a=a||{},f||(k(o,function(a){p.push(a)}),e=this.rpc=new j["default"](h["default"],{},{remote:p,local:q}),e.init(),l(n,e),k(r,function(b,c){try{c(l({},a))}catch(d){h["default"].handleError(d)}}),f=!0)}},b.exports=c["default"]},{"../common/xdm-rpc":10,"./dollar":14}],21:[function(a,b,c){function d(a,b){var c,d;if(a)if(c=a.length,null!=c&&"function"!=typeof a)for(d=0;c>d&&b.call(a[d],d,a[d])!==!1;)d+=1;else for(d in a)if(a.hasOwnProperty(d)&&b.call(a[d],d,a[d])===!1)break}function e(a,b){return a+="EventListener",b+="Event",function(c,d,e){c[a]?c[a](d,e,!1):c[b]&&c[b]("on"+d,e)}}function f(){var a=this.console;if(a&&a.log){var b=[].slice.call(arguments);if(a.log.apply)a.log.apply(a,b);else{for(var c=0,d=b.length;d>c;c+=1)b[c]=JSON.stringify(b[c]);a.log(b.join(" "))}return!0}}function g(a){return null==a?null:decodeURIComponent(a.replace(/\+/g,"%20"))}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]={each:d,log:f,decodeQueryComponent:g,bind:e("add","attach"),unbind:e("remove","detach"),extend:function(a){var b=arguments,c=[].slice.call(b,1,b.length);return d(c,function(b,c){d(c,function(b,c){a[b]=c})}),a},trim:function(a){return a&&a.replace(/^\s+|\s+$/g,"")},debounce:function(a,b){var c;return function(){function d(){c=null,a.apply(e,f)}var e=this,f=[].slice.call(arguments);c&&clearTimeout(c),c=setTimeout(d,b||50)}},inArray:function(a,b,c){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(b,a,c);for(var d=c>>>0,e=b.length>>>0;e>d;d+=1)if(b[d]===a)return d;return-1},isFunction:function(a){return"function"==typeof a},handleError:function(a){if(!f.apply(this,a&&a.message?[a,a.message]:[a]))throw a}},b.exports=c["default"]},{}]},{},[1])(1)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("../../../bower_components/atlassian-connect-js/dist/plugin"),f=d(e),g=a("../../../bower_components/atlassian-connect-js-cookie/dist/plugin"),h=(d(g),a("../../../bower_components/atlassian-connect-js-history/dist/plugin")),i=(d(h),a("./request-access-token")),j=d(i),k=a("./request"),l=d(k),m=a("./resizer"),n=d(m),o=a("./touch-point"),p=d(o);f["default"].define("request",["_dollar","_rpc","request_access_token"],l["default"]),f["default"].define("request_access_token",["_rpc"],j["default"]),f["default"].define("touch_point",["_rpc"],p["default"]),f["default"].require(["_dollar","_resize_listener","env","dialog"],n["default"]),f["default"].rpc.init({}),f["default"].resize(),c["default"]=f["default"],b.exports=c["default"]},{"../../../bower_components/atlassian-connect-js-cookie/dist/plugin":1,"../../../bower_components/atlassian-connect-js-history/dist/plugin":2,"../../../bower_components/atlassian-connect-js/dist/plugin":3,"./request":6,"./request-access-token":5,"./resizer":7,"./touch-point":8}],5:[function(a,b,c){"use strict";function d(a){var b=void 0,c=void 0,d=a.extend(function(a){return{apis:{requestAccessToken:function(d){function e(a){b=a.accessToken,c=a.refreshToken,f(b,c)}var f=d.success||function(){},g=d.error||function(){};b&&c&&!d.requestNewToken?f(b,c):a.requestAccessToken(e,g)}},stubs:["requestAccessToken"]}});return d.requestAccessToken}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d,b.exports=c["default"]},{}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c){function d(a){var b={body:a.data||null,headers:{},method:a.type||"GET",responseType:"json"};return a.contentType&&(headers["Content-Type"]=a.contentType),a.headers&&a.headers.Accept&&(headers.Accept=a.headers.Accept),b}var e=void 0,f=b.extend(function(b){return{apis:{request:function(b,f){function h(a){c({requestNewToken:!!a,success:i,error:j})}function i(a){q=a,k()}function j(a){return"user_not_authenticated"===a.code?void k():void p(a)}function k(){var b=d(f);q&&(b.headers.Authorization="Bearer "+q),g["default"](a.extend({url:f.url},b),function(a,b,c){b.statusCode<200||b.statusCode>=300?m(b):l(b.body)})}function l(a){o(a)}function m(a){401!==a.statusCode||e?p({code:"request_failed",message:"Request failed"},a):(h(!0),e=!0)}"object"==typeof b?f=b:f?f.url=b:f={url:b};var n="https://api.bitbucket.org";f.url.slice(0,n.length)!==n&&("/"!==f.url.slice(0,1)&&(f.url="/"+f.url),f.url=n+f.url);var o=f.success||function(){},p=f.error||function(){},q=void 0;h()}},stubs:["requestAccessToken"]}});return f.request}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=e;var f=a("xhr"),g=d(f);b.exports=c["default"]},{xhr:9}],7:[function(a,b,c){"use strict";function d(a,b,c,d){var e=125;d.isDialog?a.bind(window,"load",function(){c.resize();var d=c.container();d?b.addListener(d,function(){c.resize()}):a.log("Your page should have a root block element with an ID called #content or class called .ac-content if you want your page to dynamically resize after the initial load.")}):a.bind(window,"load",function(){var a;setInterval(function(){
var b=c.size();a&&a.w===b.w&&a.h===b.h||(c.resize(b.w,b.h),a=b)},e)}),a.bind(window,"load",function(){document.body.style.margin=0;var a=c.container();a&&(a.style.overflow="auto")})}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d,b.exports=c["default"]},{}],8:[function(a,b,c){"use strict";function d(a){return a.extend(function(a){var b={show:[],hide:[]};return{apis:{setIconClass:function(b){a.setTouchPointClasses(b)},cacheIconClass:function(b){a.cacheTouchPointClasses(b)},on:function(a,c){b[a].push(c)},off:function(a){var c;for(var d in b)c=b[d].indexOf(a),c>=0&&b[d].splice(c,1)}},internals:{notify:function(a){b[a].forEach(function(a){a()})}},stubs:["setTouchPointClasses","cacheTouchPointClasses"]}})}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=d,b.exports=c["default"]},{}],9:[function(a,b,c){"use strict";function d(a,b){function c(){4===l.readyState&&f()}function d(){var a=void 0;if(l.response?a=l.response:"text"!==l.responseType&&l.responseType||(a=l.responseText||l.responseXML),t)try{a=JSON.parse(a)}catch(b){}return a}function e(a){clearTimeout(n),a instanceof Error||(a=new Error(""+(a||"unknown"))),a.statusCode=0,b(a,k)}function f(){clearTimeout(n);var a=1223===l.status?204:l.status,c=k,e=null;0!==a?(c={body:d(),statusCode:a,method:p,headers:{},url:o,rawRequest:l},l.getAllResponseHeaders&&(c.headers=h(l.getAllResponseHeaders()))):e=new Error("Internal XMLHttpRequest Error"),b(e,c,c.body)}var k={body:void 0,headers:{},statusCode:0,method:p,url:o,rawRequest:l};if("string"==typeof a&&(a={uri:a}),a=a||{},"undefined"==typeof b)throw new Error("callback argument missing");b=g(b);var l=a.xhr||null;l||(l=a.cors||a.useXDR?new j:new i);var m,n,o=l.url=a.uri||a.url,p=l.method=a.method||"GET",q=a.body||a.data,r=l.headers=a.headers||{},s=!!a.sync,t=!1;if("json"in a&&(t=!0,r.Accept||(r.Accept="application/json"),"GET"!==p&&"HEAD"!==p&&(r["Content-Type"]="application/json",q=JSON.stringify(a.json))),l.onreadystatechange=c,l.onload=f,l.onerror=e,l.onprogress=function(){},l.ontimeout=e,l.open(p,o,!s),l.withCredentials=!!a.withCredentials,!s&&a.timeout>0&&(n=setTimeout(function(){l.abort("timeout")},a.timeout+2)),l.setRequestHeader)for(m in r)r.hasOwnProperty(m)&&l.setRequestHeader(m,r[m]);else if(a.headers)throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in a&&(l.responseType=a.responseType),"beforeSend"in a&&"function"==typeof a.beforeSend&&a.beforeSend(l),l.send(q),l}function e(){}var f=a("global/window"),g=a("once"),h=a("parse-headers"),i=f.XMLHttpRequest||e,j="withCredentials"in new i?i:f.XDomainRequest;b.exports=d},{"global/window":10,once:11,"parse-headers":15}],10:[function(a,b,c){(function(a){"undefined"!=typeof window?b.exports=window:"undefined"!=typeof a?b.exports=a:"undefined"!=typeof self?b.exports=self:b.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(a,b,c){function d(a){var b=!1;return function(){return b?void 0:(b=!0,a.apply(this,arguments))}}b.exports=d,d.proto=d(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return d(this)},configurable:!0})})},{}],12:[function(a,b,c){function d(a,b,c){if(!h(b))throw new TypeError("iterator must be a function");arguments.length<3&&(c=this),"[object Array]"===i.call(a)?e(a,b,c):"string"==typeof a?f(a,b,c):g(a,b,c)}function e(a,b,c){for(var d=0,e=a.length;e>d;d++)j.call(a,d)&&b.call(c,a[d],d,a)}function f(a,b,c){for(var d=0,e=a.length;e>d;d++)b.call(c,a.charAt(d),d,a)}function g(a,b,c){for(var d in a)j.call(a,d)&&b.call(c,a[d],d,a)}var h=a("is-function");b.exports=d;var i=Object.prototype.toString,j=Object.prototype.hasOwnProperty},{"is-function":13}],13:[function(a,b,c){function d(a){var b=e.call(a);return"[object Function]"===b||"function"==typeof a&&"[object RegExp]"!==b||"undefined"!=typeof window&&(a===window.setTimeout||a===window.alert||a===window.confirm||a===window.prompt)}b.exports=d;var e=Object.prototype.toString},{}],14:[function(a,b,c){function d(a){return a.replace(/^\s*|\s*$/g,"")}c=b.exports=d,c.left=function(a){return a.replace(/^\s*/,"")},c.right=function(a){return a.replace(/\s*$/,"")}},{}],15:[function(a,b,c){var d=a("trim"),e=a("for-each"),f=function(a){return"[object Array]"===Object.prototype.toString.call(a)};b.exports=function(a){if(!a)return{};var b={};return e(d(a).split("\n"),function(a){var c=a.indexOf(":"),e=d(a.slice(0,c)).toLowerCase(),g=d(a.slice(c+1));"undefined"==typeof b[e]?b[e]=g:f(b[e])?b[e].push(g):b[e]=[b[e],g]}),b}},{"for-each":12,trim:14}]},{},[4])(4)});